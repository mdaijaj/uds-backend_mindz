<div class="section">
    <div>
      <mat-card>
        <div class="row form_head">
          <h3>{{ !this.id ? 'Create AMC Agreement':'Update AMC Agreement'}}</h3>
        </div>
        <div class="form_basic">
          <form class="form_set" [formGroup]="create_amc_Form">
            <div class="row">
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Name of the Agreement</mat-label>
                    <input matInput type="text" formControlName="name_of_agreement" />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline" readonly>
                    <mat-label>Request Initiated Date</mat-label>
                    <input
                      matInput
                      [matDatepicker]="rid"
                      (click)="rid.open()"
                      formControlName="request_initiated_date"
                    />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="rid"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #rid></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>1st Party </mat-label>
                    <input matInput type="text" formControlName="first_party" />
                  </mat-form-field>
                </div>
              </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>2nd Party</mat-label>
                    <input matInput type="text" formControlName="second_party" />
                  </mat-form-field>
                </div>
              </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>3rd Party</mat-label>
                    <input matInput type="text" formControlName="third_party" />
                  </mat-form-field>
                </div>
              </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>4th Party</mat-label>
                    <input matInput type="text" formControlName="fourth_party"/>
                  </mat-form-field>
                </div>
              </div>
  
              <!-- <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline" readonly>
                    <mat-label>Vendor Name</mat-label>
                    <input matInput type="text" formControlName="vendor_name" />
                  </mat-form-field>
                </div>
              </div> -->
  
              <!-- <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Company Name</mat-label>
                    <input matInput type="text" formControlName="company_name" />
                  </mat-form-field>
                </div>
              </div> -->
              <!-- </div> -->
              <!-- <div class="row"> -->
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Description of AMC</mat-label>
                    <mat-select
                    formControlName="description_of_amc"
                  >
                    <mat-option [value]="st.amc_description" *ngFor="let st of amc_des">{{
                      st.amc_description
                    }}</mat-option>
                  </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Agreement From Date</mat-label>
                    <input
                    matInput
                    [matDatepicker]="afd"
                    (click)="afd.open()"
                    formControlName="agreement_from_date"
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="afd"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #afd></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Agreement To Date</mat-label>
                    <input
                      matInput
                      [matDatepicker]="atd"
                      (click)="atd.open()"
                      formControlName="agreement_to_date"
                    />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="atd"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #atd></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>No of Years</mat-label>
                    <input matInput type="number" formControlName="no_of_years" />
                  </mat-form-field>
                </div>
              </div>
              <!-- </div> -->
  
              <!-- <div class="row"> -->
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>% of Increment yearly</mat-label>
                    <input matInput type="text" formControlName="increment_yearly" />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Amount</mat-label>
                    <input
                      matInput
                      type="number"
                      formControlName="amount"
                      (keyup)="totalAmount()"
                    />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Tax</mat-label>
                    <input
                    matInput
                    type="number"
                    formControlName="tax"
                    (keyup)="totalAmount()"
                  />
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Total Amount</mat-label>
                    <input
                      matInput
                      type="number"
                      formControlName="total_amount"
                    />
                  </mat-form-field>
                </div>
              </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Notice Period</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="notice_period"
                    />
                  </mat-form-field>
                </div>
              </div>
  
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>1st Reminder</mat-label>
                    <input
                      matInput
                      formControlName="first_reminder"
                    />
                  </mat-form-field>
                </div>
              </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>2nd Reminder</mat-label>
                   <input
                      matInput
                      formControlName="second_reminder"
                    />
                  </mat-form-field>
                </div>
              </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>3rd Reminder</mat-label>
                    <input matInput type="text" formControlName="third_reminder" />
                  </mat-form-field>
                </div>
              </div>
  
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Status</mat-label>
                    <mat-select
                      formControlName="ams_status"
                      (selectionChange)="changeStatus($event)"
                    >
                      <mat-option [value]="st.name" *ngFor="let st of status">{{
                        st.name
                      }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Customer Status</mat-label>
                    <mat-select
                      formControlName="Customer_Status"
                    >
                      <mat-option value="Active" >Active</mat-option>
                      <mat-option value="In Active" >In Active</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>

              
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Remark/Inclusion</mat-label>
                   <input
                      matInput
                      formControlName="Remarks"
                    />
                  </mat-form-field>
                </div>
              </div>

              <div *ngIf="t_date" class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <mat-form-field appearance="outline">
                    <mat-label>Termination Date</mat-label>
                    <input
                      matInput
                      [matDatepicker]="td"
                      (click)="td.open()"
                      formControlName="terminate_date"
                    />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="td"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #td></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>

              <div *ngIf="t_date" class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <input
                    class="form-control"
                    type="file"
                    style="padding-right: 19%"
                    title="Termination Copy Upload"
                    (change)="onTermChange($event)"
                    formControlName="terminate_copy_upload"
                  />
                  <img
                    [src]="imagePath ? imagePath : this.singleData?.product_image"
                    *ngIf="imagePath || this.singleData?.product_image"
                    class="imgEmp"
                    (click)="seeTermPreview(this.singleData?.product_image, imagePath)"
                  />
                </div>
              </div>
            </div>

            <div class="mt-3" align="end">
              <button *ngIf="!id"
                mat-raised-button
                color="primary"
                class="mx-3"
                (click)="createAmc()"
              >
                Create AMC
              </button>

              <button *ngIf="id"
              mat-raised-button
              color="primary"
              class="mx-3"
              (click)="updateAmc()"
            >
              Save
            </button>

              <button *ngIf="id"
              mat-raised-button
              color="primary"
              class="mx-3"
              (click)="updateAmc()"
            >
              Update
            </button>

            <button *ngIf="id"
            mat-raised-button
            color="primary"
            class="mx-3"
            (click)="updateAmc()"
          >
            Send For Approval
          </button>

            </div>  

            <div class="outherDoc">
              <span class="file-tag">Add Others Documents</span><span
                style="cursor: pointer; font-size: 25px; color: #063178;"><i class="fa fa-plus-circle"
                 aria-hidden="true" (click)="addrow()"></i></span>
            </div>
         
              <ng-container formArrayName="upload_agreement" *ngFor="let control of CF_1.upload_agreement['controls']; index as i">
                <div class="row" [formGroup]="control">
                <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                  <div class="form-group">
                    <label>Document Name</label><br/>
                      <input
                      class="form-control"
                      matInput
                      formControlName="file_name"
                    />
                  </div>
                </div>

              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                <div class="form-group">
                  <label for="">Upload Agreement Copy</label><br/>
                    <input
                    class="form-control"
                    type="file"
                    style="padding-right: 19%"
                    title="Upload Agreement Copy"
                    (change)="onChange($event,i)"
                    formControlName="upload_agreement_copy"
                  />
                  <img
                    [src]="termimagePath ? termimagePath : this.singleData?.product_image"
                    *ngIf="termimagePath || this.singleData?.product_image"
                    class="imgEmp"
                    (click)="seePreview(this.singleData?.product_image, termimagePath)"
                  />
                </div>
              </div>
              
              <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12" style="position: relative;top: 19px;">
                <div class="form-group">
                  <button class="view-doc" style="background: #2288c3;" (click)="uploadOtherDoc(i,control)">
                    {{'Upload'}}
                  </button>
                  <i class="material-icons deleteBtn" (click)="deleteRow(i,control)">delete</i>
                </div>
              </div>
            </div>
              </ng-container>
          </form>
          <div class="mt-3" align="end">
            <button
              mat-raised-button
              color="primary"
              class="mx-3"
              (click)="createSucces()"
            >
              Submit
            </button>
            <button
              mat-raised-button
              color="warn"
              class="mx-3"
              routerLink="/master/admin-support/amc-agreement/amc-agreement-list"
            >
              Cancel
            </button>
          </div>  
        </div>
      </mat-card>
    </div>
  </div>
  