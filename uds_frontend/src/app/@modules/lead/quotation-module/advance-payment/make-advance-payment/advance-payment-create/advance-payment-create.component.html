<mat-card>
    <form [formGroup]="leadForm"><div class="section" >
        <div class="main">
                                                                                            
            <div class="msater-nav">
                <a href="">Opportunity<mat-icon>keyboard_arrow_right</mat-icon></a>
                <a routerLink="../">Create Advance Payment</a>
            </div>

            <div class="updatetitle">Create Advance Payment</div>

            <div class="apply-btn">
                <!-- <a routerLink="../interview-status-list">List</a> -->
            </div>
            <section class="job-nav">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Customer Details</h3>
                        </div>

                        <div class="form_basic">

                            <form class="form_set" [formGroup]="leadForm">
                                Customer Type
                                <input formControlName="customer_type" (click)="customerTypeNew()" checked="checked"
                                    type="radio" name="customer_type" value="New User" id="red"
                                    style="margin: 0 5px 0 4%;">New
                                <input formControlName="customer_type" (click)="customerType()" type="radio"
                                    name="customer_type" value="Existing User" id="blue"
                                    style="margin: 0 5px 4% 4%;">Existing Customer
                                <span style="margin-left: 10%;">Multiple Site Audit</span>
                                <input formControlName="site_audit" (click)="siteAuditNew()" checked="checked"
                                    type="radio" name="site_audit" value="Yes" id="red" style="margin: 0 5px 0 4%;">Yes
                                <input formControlName="site_audit" (click)="siteAudit()" type="radio" name="site_audit"
                                    value="No" id="blue" style="margin: 0 5px 4% 4%;">No

                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group" *ngIf="cutomerType">
                                            <p>Associated Company</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="associated_company">
                                                    <mat-option value="Elite Mindz Technology">Elite Mindz
                                                        Technology</mat-option>
                                                    <mat-option value="DQS Pvt Ltd">DQS Pvt Ltd</mat-option>
                                                </mat-select>

                                            </mat-form-field>
                                        </div>
                                        <div class="form-group" *ngIf="!cutomerType">
                                            <p>Associated Company</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="associated_company" />
                                                <mat-error *ngIf="
                            leadForm.controls['associated_company'].hasError(
                              'required'
                            )
                          ">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Segment</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <mat-select formControlName="segment">
                                                    <!-- <mat-option value="MSA">MSA</mat-option>
                            <mat-option value="MED">MED</mat-option> -->
                                                    <mat-option *ngFor="let item of segmentList"
                                                        [value]="item.segment_id">{{ item.segment_name
                                                        }}</mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="
                        leadForm.controls['segment'].hasError(
                          'required'
                        )
                      ">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Certificate Type</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <mat-select formControlName="certificate_type">
                                                    <mat-option *ngFor="let item of certificateList"
                                                        [value]="item.certificate_type_id">{{
                                                        item.certificate_type_name }}</mat-option>

                                                </mat-select>
                                                <mat-error *ngIf="
                        leadForm.controls['certificate_type'].hasError(
                          'required'
                        )
                      ">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" *ngIf="cutomerType">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>BR No.</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <input matInput type="text" formControlName="br_number" />

                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">

                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">

                                    </div>
                                </div>

                                <div class="row" *ngIf="cutomerType">
                                    <div class="col-xxl-8 col-lg-8 col-md-8 col-sm-8 col-12">
                                        <div class="form-group">
                                            Do you want to Create New Location/Site - {{this.singleLeadData.br_number}}
                                            <input formControlName="br_number" checked="checked" type="radio"
                                                name="br_number" value="yes" id="red" style="margin: 0 5px 0 4%;">Yes
                                            <input formControlName="br_number" type="radio" name="br_number" value="no"
                                                id="blue" style="margin: 0 5px 4% 4%;">No
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>First Name</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <input matInput type="text" formControlName="first_name" />
                                                <mat-error *ngIf="leadForm.controls['first_name'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Last Name</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Email ID</mat-label> -->
                                                <input matInput type="text" formControlName="last_name" />
                                                <mat-error *ngIf="leadForm.controls['last_name'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Email ID</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Mobile Number</mat-label> -->
                                                <input matInput type="email" formControlName="email" />
                                                <mat-error *ngIf="leadForm.controls['email'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                                <mat-error *ngIf="leadForm.controls['email'].errors?.['pattern']">Please
                                                    enter valid email</mat-error>

                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Job Title</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Job Title</mat-label> -->
                                                <input matInput type="text" formControlName="job_title" />
                                                <mat-error *ngIf="leadForm.controls['job_title'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Street Address</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Job Role</mat-label> -->
                                                <input matInput type="text" formControlName="street_address" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['street_address'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Address Line 2</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Application Date</mat-label> -->
                                                <input matInput type="text" formControlName="address2" />
                                                <mat-error *ngIf="leadForm.controls['address2'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Country&nbsp;<span class="form_required">*</span></p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <mat-select formControlName="country"
                                                    (selectionChange)="getCountryID($event)">
                                                    <mat-option *ngFor="let item of countryList"
                                                        [value]="item.countryss_id">{{
                                                        item.countryss_name }}</mat-option>
                                                    <!-- <mat-option value="India">India</mat-option>
                            <mat-option value="USA">USA</mat-option> -->
                                                </mat-select>
                                                <mat-error *ngIf=" leadForm.controls['country'].hasError('required') ">
                                                    Required*
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>State&nbsp;<span class="form_required">*</span></p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <mat-select formControlName="state"
                                                    (selectionChange)="getStateID($event)">
                                                    <mat-option *ngFor="let item of stateList"
                                                        [value]="item.states_id">{{ item.states_name
                                                        }}</mat-option>
                                                    <!-- <mat-option value="Delhi">Delhi</mat-option>
                            <mat-option value="Maharastra">Maharastra</mat-option> -->
                                                </mat-select>
                                                <mat-error *ngIf="leadForm.controls['state'].hasError('required')">
                                                    Required*
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>City&nbsp;<span class="form_required">*</span></p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="city">
                                                    <mat-option *ngFor="let item of cityList" [value]="item.city_id">{{
                                                        item.city_name}}</mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="leadForm.controls['city'].hasError('required')">
                                                    Required*
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group" *ngIf="!pinCodeTrue">
                                            <p>Postal Code</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="postal_code">
                                                    <mat-option *ngFor="let item of pinCodeList"
                                                        [value]="item.pincode_name">{{ item.pincode_name}}</mat-option>
                                                </mat-select>
                                                <mat-error
                                                    *ngIf=" leadForm.controls['postal_code'].hasError('pattern')">
                                                    Postal Code must be 6 digit*
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div class="form-group" *ngIf="pinCodeTrue">
                                            <p>Postal Code</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="postal_code" />
                                                <mat-error *ngIf="leadForm.controls['postal_code'].hasError('pattern')">
                                                    Postal Code must be 5-6 digits..*
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Region&nbsp;<span class="form_required">*</span></p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <mat-select formControlName="region">
                                                    <mat-option *ngFor="let item of regionSList"
                                                        [value]="item.new_region_id">{{ item.new_region_name
                                                        }}</mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="leadForm.controls['region'].hasError('required')">
                                                    Required*
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Regional Business Head&nbsp;<span class="form_required">*</span></p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <mat-select formControlName="regional_bussiness_lead">
                                                    <mat-option *ngFor="let item of regionalbheadList"
                                                        [value]="item.new_regional_business_head_id">{{
                                                        item.first_name}}</mat-option>
                                                </mat-select>
                                                <mat-error
                                                    *ngIf="leadForm.controls['regional_bussiness_lead'].hasError('required')">
                                                    Required*
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Global Managing Director</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text"
                                                    formControlName="global_managing_director" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['global_managing_director'].hasError('required' )">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Global Manager Sales&nbsp;<span class="form_required">*</span></p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <mat-select formControlName="global_manager_sales">
                                                    <mat-option *ngFor="let item of globalMsalesList"
                                                        [value]="item.new_global_manager_sales_id">{{ item.first_name
                                                        }}</mat-option>
                                                </mat-select>
                                                <mat-error
                                                    *ngIf=" leadForm.controls['global_manager_sales'].hasError('required' )">
                                                    Required*
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Website URL</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="website_url" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-xxl-2 col-lg-2 col-md-2 col-sm-2 col-12">
                                        <div class="form-group">
                                          <p>Code</p>
                                          <mat-form-field appearance="outline">
                                            <input matInput type="number" min="1" tabindex="-1" formControlName="phone_code" />
                                          </mat-form-field>
                                        </div>
                                      </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Phone Number</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="phone_number" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-1 col-lg-1 col-md-1 col-sm-1 col-12">
                                        <div class="form-group">
                                          <p>Code</p>
                                          <mat-form-field appearance="outline">
                                            <input matInput type="text" min="1" tabindex="-1" readonly formControlName="mobile_code" />
                                          </mat-form-field>
                                        </div>
                                      </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Mobile Number</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="mobile_number" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['mobile_number'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                                <mat-error
                                                    *ngIf="  leadForm.controls['mobile_number'].errors?.['pattern']">Mobile
                                                    number is not 10 digit</mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>

            <section class="job-nav" *ngIf="!singleLeadData?.isProspect">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Lead Source Details</h3>
                        </div>
                        <div class="form_basic">
                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>DQS Contact Source</p>
                                            <mat-form-field appearance="outline"  [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="dqs_contact_source">
                                                   <mat-option  [disabled]="true" [value]="data.contact_source_id" *ngFor="let data of contact_list">{{data.contact_source_name}}</mat-option
                                                   >
                                                 </mat-select>
                                               </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Lead Created By</p>
                                            <mat-form-field appearance="outline">
                                                <input matInput
                                                    [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''"
                                                    type="text" formControlName="lead_created_by_name" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['lead_created_by_name'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group" class="readonly-wrapper">
                                            <p>Lead Created Date</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput [matDatepicker]="dp" (click)="dp.open()"
                                                    formControlName="lead_created_date" [max]="maxDate"
                                                    [min]="minDate" />
                                                <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                                                <mat-datepicker #dp></mat-datepicker>
                                                <mat-error
                                                    *ngIf="leadForm.controls['lead_created_date'].hasError('required' )">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>

            <section class="job-nav">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Requirement Details</h3>
                        </div>

                        <div class="form_basic">
                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Categories</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="categories">
                                                    <mat-option *ngFor="let item of CategorySList"
                                                        [value]="item.new_category_master_id">{{
                                                        item.new_category_master_name }}</mat-option>
                                                </mat-select>
                                                <mat-error
                                                    *ngIf=" leadForm.controls['categories'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Standard Program Assesment</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="standard_program_assement">
                                                    <mat-option *ngFor="let item of assesmentList"
                                                        [value]="item.product_master_id">{{ item.product_master_name
                                                        }}</mat-option>
                                                </mat-select>
                                                <mat-error
                                                    *ngIf="leadForm.controls['standard_program_assement'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Remarks</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="remarks" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>

            <section class="job-nav" *ngIf="!singleLeadData?.isProspect">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Lead Validation</h3>
                        </div>

                        <div class="form_basic">

                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Remarks</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="lead_validate_remarks" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Validated By</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="validated_by">
                                                    <mat-option *ngFor="let item of allAchievement"
                                                        [value]="item.first_name">{{item.first_name}}</mat-option>
                                                </mat-select>
                                                <mat-error
                                                    *ngIf="leadForm.controls['validated_by'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group" class="readonly-wrapper">
                                            <p>Lead Validated Date</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput [matDatepicker]="dp2" (click)="dp2.open()"
                                                    formControlName="lead_validated_date" [max]="maxDate"
                                                    [min]="minDate" />
                                                <mat-datepicker-toggle matSuffix [for]="dp2"></mat-datepicker-toggle>
                                                <mat-datepicker #dp2></mat-datepicker>
                                                <mat-error
                                                    *ngIf="leadForm.controls['lead_validated_date'].hasError('required' )">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>

            <section class="job-nav">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Company Additional Details</h3>
                        </div>
                        <div class="form_basic">
                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Industry Sector</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="industry_sector" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['industry_sector'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Customer Category</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <!-- <mat-label>Candidate Name</mat-label> -->
                                                <mat-select formControlName="customer_category">
                                                    <mat-option value="Pvt Ltd">Pvt Ltd</mat-option>
                                                    <mat-option value="Public Ltd">Public Ltd</mat-option>
                                                </mat-select>
                                                <mat-error
                                                    *ngIf="leadForm.controls['customer_category'].hasError( 'required' )">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12" *ngIf="nonCertTrue">
                                        <div class="form-group">
                                            <p>Employee Count</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput min="1" type="text" formControlName="employee_count" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['employee_count'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Customer Sales Executive</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text"
                                                    formControlName="customer_sales_executive" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['customer_sales_executive'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Assign Opportunity to</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="assigned_to" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['assigned_to'].hasError('required') ">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group" *ngIf="nonCertt">
                                            <p>Non-Cert Type</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="non_cert_type">
                                                    <mat-option value="Open House">Open House</mat-option>
                                                    <mat-option value="In House">In House</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Opportunity Type</p>
                                            <mat-form-field appearance="outline" readonly>
                                                <mat-select formControlName="opportunity_type" required>
                                                    <mat-option value="Certification - New Audit (RA)">Certification -
                                                        New Audit (RA)</mat-option>
                                                    <mat-option value="Certification - Audit (TRA)">Certification -
                                                        Audit (TRA)</mat-option>
                                                    <mat-option value="KSC - Facilitation">KSC -
                                                        Facilitation</mat-option>
                                                    <mat-option value="KSC - GAP Assessment">KSC - GAP
                                                        Assessment</mat-option>
                                                    <mat-option value="KSC - Special Assessment">KSC - Special
                                                        Assessment</mat-option>
                                                    <mat-option value="KSC - Training">KSC - Training</mat-option>
                                                    <mat-option value="Certification - Inter Company">Certification -
                                                        Inter Company</mat-option>
                                                    <mat-option value="Existing Opportunity - Migration">Existing
                                                        Opportunity -
                                                        Migration</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Opportunity Ref No</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="opportunity_ref" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['opportunity_ref'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Product Request</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="product_request" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['product_request'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>GST Applicable</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="gst_applicable" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['gst_applicable'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12" *ngIf="unreg">
                                        <div class="form-group">
                                            <p>URD Number</p>
                                            <mat-form-field appearance="outline" readonly>
                                                <input matInput maxlength="15" type="text" formControlName="urd_number"
                                                    oninput="this.value = this.value.toUpperCase()" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12"
                                        *ngIf="(gstreg&&gstvalidation)">
                                        <div class="form-group">
                                            <p>GST Number</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="gst_number" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>



            <section class="job-nav" *ngIf="!showaccredetion">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>SIC & Accredition Logo Details</h3>
                        </div>

                        <div class="form_basic">

                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Assessment Period</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="assessment_period">
                                                    <mat-option value="Annual">Annual</mat-option>
                                                    <mat-option value="Semi-Annual">Semi-Annual</mat-option>
                                                </mat-select>
                                                <mat-error
                                                    *ngIf="leadForm.controls['assessment_period'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>EA Code</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="ea_code" />
                                                <mat-error *ngIf="leadForm.controls['ea_code'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Accredition Logo Details</p>
                                            <mat-form-field appearance="outline" readonly>
                                                <input matInput type="text"
                                                    formControlName="accredition_logo_details" /><mat-error
                                                    *ngIf="leadForm.controls['accredition_logo_details'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>

                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Additional Certificates Copies</p>
                                            <mat-form-field appearance="outline" readonly>
                                                <input matInput type="text" formControlName="add_cert_copy" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['add_cert_copy'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>

            <section class="job-nav" *ngIf="singleLeadData?.non_cert_type !='In House'">
                <div class="section">
                  <mat-card>
                    <div class="row form_head">
                      <h3>Additional Site Details</h3>
                    </div>
                    <div class="form_basic">
                        <div class="row">
                          <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                            <div class="form-group">
                              <!-- new code for child data  starts-->
                              <div *ngFor="let data of stageData1 ">
                                <span class="fw-bolder sitefont">
                                {{data.br_number}}/{{data.emp_count || singleLeadData.employee_count}}/{{data.standard_program_name || singleLeadData.standard_program_assement_name}}/{{data.child_scope}}/{{data.ea_code}}/{{data.singleData.associated_company ? data.singleData.associated_company : data.singleData.first_name + " - "}}/{{data.singleData.state_name}}/{{data.singleData.region_name}}
                                </span>
                                <div class="row">
                                  <!---stage and Mandays table start-->
                                  <div class="col-xxl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                    <div class="form-group stage-table">
                                      <div class="d-flex justify-content-between  p-1 rounded fw-bolder text-white"
                                        style="background-color: #063178;">
                                        <h4 class="p-0 m-0"> Stage </h4>
                                        <h4 class="p-0 m-0"> No of Mandays </h4>
                                      </div>
                                      <div *ngFor="let item of data.stage" class="data_right_all">
                                        <div style="display: flex;justify-content: space-between; align-items: center;">
                                          <span class="row-val">
                                            {{ item.stage }}
                                          </span>
                                          <span class="row-val">
                                            <span style="margin-right: 12px;">{{ item.noOfMandays }}</span>
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <!---stage and Mandays table end-->
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                        
                            <p class="sitefont fw-bolder">Billing Site</p>
                            <label for="billing_site_two" class="bill-sit billing_site_ui"
                            *ngFor="let item of singleLeadData?.billing_site_copy index as i">
                            {{i+1}} {{')'}} {{ item}}/
                            {{this.singleLeadData?.associated_company +" - " +this.singleLeadData?.customer_category }}/{{singleLeadData?.city_name }}/
                            {{singleLeadData?.region_name}}/{{singleLeadData?.first_name}}
                          </label>
        
                          </div>
                        </div>
                        <!-- child side box starts  -->
        
                        <!-- child side box ends  -->
        
                      </div>
                  </mat-card>
                </div>
              </section>

            <section class="job-nav">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Documents Required</h3>
                        </div>
                        <div class="form_basic">
                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <p class="file-tag">Contact Review Form</p>
                                        </div>
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <input formControlName="contact_review_form" id="file" type="file" multiple
                                                class="form-control" (change)="fileInputChange($event)" />
                                        </div>

                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group" *ngIf="this.singleLeadData?.contact_review_form">
                                            <button class="view-doc" (click)="viewDocReview()">
                                                View
                                            </button>
                                            <button class="view-doc down" (click)="downloadContact($event)">
                                                Download
                                            </button>
                                            <p class="version_count">V{{singleLeadData?.contactFile_count}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <p class="file-tag">GST File</p>
                                        </div>
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <input formControlName="gst_file" id="file" type="file" multiple
                                                class="form-control" (change)="fileInputChangeOne($event)" />
                                        </div>
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <button class="view-doc" (click)="viewDocGST()">
                                                View
                                            </button>
                                            <button class="view-doc down" (click)="downloadGst($event)">
                                                Download
                                            </button>
                                            <p class="version_count">V{{singleLeadData?.gstFile_count}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <p class="file-tag">Company Logo File</p>
                                        </div>
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <input formControlName="company_logo" id="file" type="file" multiple
                                                class="form-control" (change)="fileInputChangeTwo($event)" />
                                        </div>
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <button class="view-doc" (click)="viewDocLogo()">
                                                View
                                            </button>
                                            <button class="view-doc down" (click)="downloadLogo($event)">
                                                Download
                                            </button>
                                            <p class="version_count">V{{singleLeadData?.companyFile_count}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <p class="file-tag">Basic Form</p>
                                        </div>
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <input formControlName="basic_form" id="file" type="file" multiple
                                                class="form-control" (change)="fileInputChangeThree($event)" />
                                        </div>
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                        <div class="form-group">
                                            <button class="view-doc" (click)="viewDocBasic()">
                                                View
                                            </button>
                                            <button class="view-doc down" (click)="downloadBasic($event)">
                                                Download
                                            </button>
                                            <p class="version_count">V{{singleLeadData?.basicFile_count}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div *ngFor="let data of otherDocumentData; let i = index" class="row">
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                      <div class="form-group">
                                        <p class="file-tag">Others</p>
                                      </div>
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                      <div class="form-group">
                                        <input  (change)="onChange($event, i)"
                                        formControlName="other_file" id="file" type="file" multiple class="form-control" />
                                       </div>    
                                    </div>
                                    <div class="col-xxl-3 col-lg-3 col-md-3 col-sm-3 col-12">
                                      <div class="form-group">
                                        <button class="view-doc" (click)="viewDocOther(i)">
                                          View
                                        </button>
                                        <button class="view-doc down" (click)="downloadOther(i)">
                                          Download
                                        </button>
                                        <p class="version_count">V{{i+1}}</p>
                                      </div>
                                    </div>
                                  </div>
                                <div class="row">
                                    <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                        <div class="form-group">
                                            <p class="file-tag">Remarks</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="document_remark" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>

            <section class="job-nav" *ngIf="!showaccredetion">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Opportunity Verification</h3>
                        </div>
                        <div class="form_basic">
                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>L1 Verifier Name</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text"
                                                    formControlName="opp_verifier_name_level1" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['opp_verifier_name_level1'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group" class="readonly-wrapper">
                                            <p>L1 Verified Date</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput [matDatepicker]="dp3" (click)="dp3.open()"
                                                    formControlName="opp_verified_date_level1" [max]="maxDate"
                                                    [min]="minDate" />
                                                <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
                                                <mat-datepicker #dp3></mat-datepicker>
                                                <mat-error
                                                    *ngIf="leadForm.controls['opp_verifier_name_level1'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Remarks</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text"
                                                    formControlName="opp_verified_remarks_level1" />

                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>L2 Verifier Name</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text"
                                                    formControlName="opp_verifier_name_level2" />
                                                <mat-error
                                                    *ngIf="leadForm.controls['opp_verifier_name_level2'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group" class="readonly-wrapper">
                                            <p>L2 Verified Date</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput [matDatepicker]="dp4" (click)="dp4.open()"
                                                    formControlName="opp_verified_date_level2" [max]="maxDate"
                                                    [min]="minDate" />

                                                <mat-datepicker-toggle matSuffix [for]="dp4"></mat-datepicker-toggle>
                                                <mat-datepicker #dp4></mat-datepicker>
                                                <mat-error
                                                    *ngIf="leadForm.controls['opp_verified_date_level2'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Remarks</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text"
                                                    formControlName="opp_verified_remarks_level2" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>

            <section class="job-nav">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Quotation Details</h3>
                        </div>
                        <div class="form_basic">
                            <!-- <div class="row">
                                <div class="col-xxl-10 col-lg-10 col-md-10 col-sm-10 col-12"></div>
                                 <div class="col-xxl-2 col-lg-2 col-md-2 col-sm-2 col-12">
                                    <button mat-button tappable class="table-btn" (click)="showPriceTable()">View Price
                                        Details</button>
                                </div>
                            </div> -->
                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Quotation Currency</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <mat-select formControlName="quotation_currency">
                                                    <mat-option *ngFor="let item of currencyList"
                                                        [value]="item.Currency_Convert_id">{{item.Currency_Type}}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <mat-error
                                                *ngIf="leadForm.controls['quotation_currency'].hasError('required') ">
                                                This field is required!
                                            </mat-error>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Slab-A Quote(In INR)</p>
                                            <mat-form-field appearance="outline"
                                                >
                                                <input matInput type="number" formControlName="slab_quote" />
                                            </mat-form-field>
                                            <mat-error *ngIf="leadForm.controls['slab_quote'].hasError('required')">
                                                This field is required!
                                            </mat-error>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Expense Category
                                            <p>
                                                <mat-form-field appearance="outline"
                                                    [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                    <!-- <mat-label>Candidate Name</mat-label> -->
                                                    <mat-select formControlName="expense_category">
                                                        <mat-option value="Billable">Billable</mat-option>
                                                        <mat-option value="Non-Billable">Non-Billable</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <mat-error
                                                    *ngIf=" leadForm.controls['expense_category'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12" *ngIf="!showaccredetion">
                                        <div class="form-group">
                                            <p>Accredition Logo Cost</p>
                                            <mat-form-field appearance="outline">
                                                <input matInput readonly type="text" formControlName="logo_cost" />
                                            </mat-form-field>
                                            <mat-error *ngIf="leadForm.controls['logo_cost'].hasError('required')">
                                                This field is required!
                                            </mat-error>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                          <p>Total Amount (in {{currencyType}})</p>
                                          <mat-form-field appearance="outline">
                                            <input matInput type="text" readonly formControlName="totalAmount_inInr" />
                                            <mat-error *ngIf="leadForm.controls['totalAmount_inInr'].hasError('required')">
                                              This field is required!
                                            </mat-error>
                                          </mat-form-field>
                                        </div>
                                      </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-8 col-lg-8 col-md-8 col-sm-8 col-12">
                                        Company Logo Required
                                        <input formControlName="company_logo_req" (click)="logoReqNew()"
                                            checked="checked" type="radio" name="company_logo_req" value="Yes" id="red"
                                            style="margin: 5% 5px 0 4%;">Yes
                                        <input formControlName="company_logo_req" (click)="logoReq()" type="radio"
                                            name="company_logo_req" value="No" id="blue" style="margin: 0 5px 4% 4%;">No
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group" *ngIf="logoCost">
                                            <p>Company Logo Cost</p>
                                            <mat-form-field appearance="outline"  [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" readonly formControlName="company_logo_cost">
                                                <mat-error
                                                    *ngIf="leadForm.controls['company_logo_cost'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Quote Prepared</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput type="text" formControlName="quote_prepared" />
                                            </mat-form-field>
                                            <mat-error
                                                *ngIf="leadForm.controls['quote_prepared'].hasError('required')">
                                                This field is required!
                                            </mat-error>
                                        </div>
                                    </div>
                                    <div class="col-xxl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                        <div class="form-group">
                                            <p>Quote Prepared Date</p>
                                            <mat-form-field appearance="outline"
                                                [ngClass]="leadUpdate==='createAdvancePayment' ? 'readonly-wrapper' : ''">
                                                <input matInput [matDatepicker]="dp5" (click)="dp5.open()"
                                                    formControlName="quote_prepared_date" [max]="maxDate"
                                                    [min]="minDate" />

                                                <mat-datepicker-toggle matSuffix [for]="dp5"></mat-datepicker-toggle>
                                                <mat-datepicker #dp5></mat-datepicker>
                                            </mat-form-field>
                                            <mat-error
                                                *ngIf="leadForm.controls['quote_prepared_date'].hasError('required')">
                                                This field is required!
                                            </mat-error>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </mat-card>
                </div>
            </section>

            <section class="job-nav">
                <div class="section">
                    <mat-card>
                        <div class="row form_head">
                            <h3>Advance Payment Details</h3>
                        </div>
                        <div class="form_basic">
                            <form class="form_set" [formGroup]="leadForm">
                                <div class="row">
                                    <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                        <div class="form-group">
                                            <p>Committed Payment Date</p>
                                            <mat-form-field appearance="outline">
                                                <input matInput [matDatepicker]="dp6" (click)="dp6.open()"
                                                    formControlName="commited_payment_date" [max]="maxDate"
                                                    [min]="minDate" />
                                                <mat-datepicker-toggle matSuffix [for]="dp6"></mat-datepicker-toggle>
                                                <mat-datepicker #dp6></mat-datepicker>
                                                <mat-error
                                                    *ngIf="leadForm.controls['commited_payment_date'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                        <div class="form-group">
                                            <p>Total Amount</p>
                                            <mat-form-field appearance="outline">
                                                <input matInput type="number" formControlName="total_amount" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                        <div class="form-group">
                                            <p>Committed Payment Amount(In %)</p>
                                            <mat-form-field appearance="outline" readonly>
                                                <input matInput type="text" formControlName="commited_payment_amount" (keyup)="calculateOutstanding($event)">
                                            </mat-form-field>
                                            <mat-error
                                                *ngIf="leadForm.controls['commited_payment_amount'].hasError('pattern')">
                                                Payment Amount should range from 0% to 100%.
                                            </mat-error>
                                        </div>
                                    </div>
                                    <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                        <div class="form-group">
                                            <p>Advance Payment Amount</p>
                                            <mat-form-field appearance="outline">
                                                <input matInput type="number" formControlName="advPaymentAmount" />
                                            </mat-form-field>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                        <div class="form-group">
                                            <p>Current Date</p>
                                            <mat-form-field appearance="outline">
                                                <input matInput [matDatepicker]="dp7" (click)="dp7.open()"
                                                    formControlName="current_date" [max]="maxDate" [min]="minDate" />

                                                <mat-datepicker-toggle matSuffix [for]="dp7"></mat-datepicker-toggle>
                                                <mat-datepicker #dp7></mat-datepicker>
                                                <mat-error
                                                    *ngIf="leadForm.controls['current_date'].hasError('required')">
                                                    This field is required!
                                                </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                        <div class="form-group">
                                            <p>Advance Payment Remarks</p>
                                            <mat-form-field appearance="outline">
                                                <input matInput type="text" formControlName="advance_payment_remark" />
                                                <mat-error
                                                *ngIf="leadForm.controls['advance_payment_remark'].hasError('required')">
                                                This field is required!
                                            </mat-error>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="row">

                                        <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                                <p>Remaining Amount</p>
                                                <mat-form-field appearance="outline">
                                                    <input matInput type="number"
                                                        formControlName="remaining_amoutn" />
                                                </mat-form-field>
                                            </div>
                                        </div>

                         
                                          <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                                <p>Outstanding Amount</p>
                                                <mat-form-field appearance="outline">
                                                    <input matInput type="number" formControlName="outstanding_amount" />
                                                </mat-form-field>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xxl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                            <div class="form-group">
                                              <p>Advance payment Status&nbsp;<span class="site">*</span></p>
                                              <mat-form-field appearance="outline">
                                                <mat-select  (selectionChange)="paymentStatus($event)">
                                                  <mat-option value="approve">Approve</mat-option>
                                                  <mat-option value="reject">Reject</mat-option>
                                                </mat-select>
                                  
                                              </mat-form-field>
                                            </div>
                                          </div>
                                    </div>
                                </div>
                                <div class="upload-btn">
                                    <button class="cancel-btn" (click)="cancel()">Cancel</button>
                                    <button mat-raised-button *ngIf="status_btn=='approve'" type="submit" class="iploadBtn" (click)="submitForm()">Make Advance Payment</button>
                                    <button mat-raised-button *ngIf="status_btn=='reject' || status_btn=='approve'" class="iploadBtn" type="submit" (click)="feaApproval()">FEA Approval</button>
                                </div>
                            </form>
                            <!-- <div *ngIf=showTable>
                                <app-planning-audit-details></app-planning-audit-details>
                            </div> -->
                        </div>
                    </mat-card>
                </div>
            </section>
            
        </div>
    </div>
</form>
</mat-card>